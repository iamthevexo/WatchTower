<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WatchTower - Complete Media Tracking</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary: #000000;
            --primary-light: #333333;
            --secondary: #555555;
            --accent: #1a73e8;
            --accent-hover: #0d62d9;
            --light: #ffffff;
            --dark: #000000;
            --gray: #666666;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --success: #34a853;
            --warning: #f9ab00;
            --danger: #ea4335;
            --info: #4285f4;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.12);
            --radius: 8px;
            --radius-sm: 4px;
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            background-color: #ffffff;
            color: #000000;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background-color: #ffffff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid #f0f0f0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #000000;
            text-decoration: none;
            cursor: pointer;
        }

        .logo i {
            font-size: 24px;
        }

        .logo h1 {
            font-size: 22px;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .nav-link {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            cursor: pointer;
        }

        .nav-link:hover {
            background-color: #f5f5f5;
        }

        .nav-link.active {
            color: var(--accent);
            background-color: rgba(26, 115, 232, 0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .user-avatar:hover {
            border-color: var(--accent);
            transform: scale(1.05);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            padding: 30px 0 60px;
            min-height: calc(100vh - 180px);
        }

        .app-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .app-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }

        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Sidebar */
        .sidebar {
            background: #ffffff;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid #f0f0f0;
            height: fit-content;
            position: sticky;
            top: 90px;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-section:last-child {
            margin-bottom: 0;
        }

        .sidebar-section h3 {
            font-size: 16px;
            color: #000;
            margin-bottom: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quick-stats {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f9f9f9;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .stat-item:hover {
            background: #f0f0f0;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-btn {
            padding: 10px 15px;
            background: #f9f9f9;
            border: none;
            border-radius: var(--radius-sm);
            text-align: left;
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
        }

        .filter-btn:hover {
            background: #f0f0f0;
        }

        .filter-btn.active {
            background: var(--accent);
            color: white;
        }

        /* Card */
        .card {
            background: #ffffff;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid #f0f0f0;
            margin-bottom: 20px;
        }

        .card h3 {
            margin-bottom: 20px;
            font-size: 18px;
        }

        /* Section Header */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-header h2 {
            font-size: 24px;
            font-weight: 700;
        }

        .section-actions {
            display: flex;
            gap: 10px;
        }

        /* Search Bar */
        .search-bar {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 45px 12px 45px;
            border: 2px solid #e0e0e0;
            border-radius: var(--radius);
            font-size: 15px;
            transition: var(--transition);
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }

        .clear-search {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            display: none;
        }

        /* Buttons */
        .btn-primary, .btn-secondary, .btn-outline, .btn-danger {
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-hover);
        }

        .btn-secondary {
            background-color: #f5f5f5;
            color: #333;
        }

        .btn-secondary:hover {
            background-color: #e0e0e0;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid #e0e0e0;
            color: #333;
        }

        .btn-outline:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #d93025;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 13px;
        }

        /* Materials Grid */
        .materials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .material-card {
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: var(--radius);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
        }

        .material-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
            border-color: var(--accent);
        }

        .material-poster {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
        }

        .material-info {
            padding: 15px;
        }

        .material-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 8px;
            color: #000;
        }

        .material-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 13px;
            color: #666;
        }

        .material-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--warning);
            font-weight: 600;
        }

        .material-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-planning {
            background: rgba(26, 115, 232, 0.1);
            color: var(--accent);
        }

        .status-watching {
            background: rgba(52, 168, 83, 0.1);
            color: var(--success);
        }

        .status-completed {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .status-dropped {
            background: rgba(234, 67, 53, 0.1);
            color: var(--danger);
        }

        .material-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 8px;
            background: #f5f5f5;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-size: 13px;
        }

        .action-btn:hover {
            background: #e0e0e0;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #f0f0f0;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            font-weight: 500;
            color: #666;
        }

        .tab:hover {
            color: #000;
            background: #f9f9f9;
        }

        .tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--radius);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 28px;
            color: #999;
            cursor: pointer;
            transition: var(--transition);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            background: #f5f5f5;
            color: #000;
        }

        .modal-body {
            padding: 25px;
        }

        /* Form */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: var(--radius-sm);
            font-size: 14px;
            transition: var(--transition);
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Auth Pages */
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .auth-card {
            background: white;
            border-radius: var(--radius);
            padding: 40px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .auth-header p {
            color: #666;
        }

        .auth-divider {
            text-align: center;
            margin: 20px 0;
            color: #999;
            position: relative;
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: #e0e0e0;
        }

        .auth-divider::before {
            left: 0;
        }

        .auth-divider::after {
            right: 0;
        }

        .auth-footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }

        .auth-footer a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 600;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: -100px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: var(--radius);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 3000;
            min-width: 300px;
            transition: bottom 0.3s ease;
        }

        .notification.show {
            bottom: 20px;
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }

        .notification.info {
            border-left: 4px solid var(--info);
        }

        .notification i {
            font-size: 20px;
        }

        .notification.success i {
            color: var(--success);
        }

        .notification.error i {
            color: var(--danger);
        }

        .notification.info i {
            color: var(--info);
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Profile Section */
        .profile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: var(--radius);
            margin-bottom: 30px;
        }

        .profile-info {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            color: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: 700;
            border: 4px solid white;
        }

        .profile-details h2 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .profile-stats {
            display: flex;
            gap: 40px;
            margin-top: 20px;
        }

        .profile-stat {
            text-align: center;
        }

        .profile-stat .value {
            display: block;
            font-size: 28px;
            font-weight: 700;
        }

        .profile-stat .label {
            display: block;
            font-size: 14px;
            opacity: 0.9;
        }

        /* Settings Grid */
        .settings-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        .settings-menu {
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: var(--shadow);
            border: 1px solid #f0f0f0;
            height: fit-content;
        }

        .settings-item {
            padding: 12px 15px;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .settings-item:hover {
            background: #f5f5f5;
        }

        .settings-item.active {
            background: var(--accent);
            color: white;
        }

        .settings-content {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid #f0f0f0;
        }

        /* Forum Post */
        .forum-post {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            transition: var(--transition);
        }

        .forum-post:hover {
            box-shadow: var(--shadow);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-author {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .post-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .post-content {
            color: #333;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .post-actions {
            display: flex;
            gap: 20px;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #666;
            cursor: pointer;
            transition: var(--transition);
            padding: 5px 10px;
            border-radius: var(--radius-sm);
        }

        .post-action:hover {
            background: #f5f5f5;
            color: var(--accent);
        }

        /* Groups Grid */
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .group-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: var(--radius);
            padding: 20px;
            transition: var(--transition);
            cursor: pointer;
        }

        .group-card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-2px);
        }

        .group-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .group-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .group-members {
            font-size: 13px;
            color: #666;
        }

        /* Social Share Buttons */
        .share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .share-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            color: white;
        }

        .share-btn.facebook {
            background: #1877f2;
        }

        .share-btn.twitter {
            background: #1da1f2;
        }

        .share-btn.whatsapp {
            background: #25d366;
        }

        .share-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: #666;
        }

        .empty-state p {
            margin-bottom: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .nav-links {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }

            .dashboard-grid,
            .settings-grid {
                grid-template-columns: 1fr;
            }

            .materials-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .profile-info {
                flex-direction: column;
                text-align: center;
            }

            .profile-stats {
                justify-content: center;
            }

            .sidebar {
                position: static;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-new {
            background: var(--success);
            color: white;
        }

        .badge-trending {
            background: var(--warning);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Auth Container (Login/Signup) -->
    <div id="authContainer" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <i class="fas fa-tower-observation" style="font-size: 48px; color: var(--accent); margin-bottom: 15px;"></i>
                <h2>Welcome to WatchTower</h2>
                <p>Track all your movies, series, anime, books & more</p>
            </div>

            <!-- Login Form -->
            <div id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="••••••••" required>
                </div>
                <button class="btn-primary" onclick="login()" style="width: 100%; justify-content: center;">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>
                <div class="auth-footer">
                    <p>Don't have an account? <a href="#" onclick="showSignup(); return false;">Sign up</a></p>
                    <p><a href="#" onclick="showForgotPassword(); return false;">Forgot password?</a></p>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" style="display: none;">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" placeholder="John Doe" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" placeholder="••••••••" required>
                </div>
                <button class="btn-primary" onclick="signup()" style="width: 100%; justify-content: center;">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
                <div class="auth-footer">
                    <p>Already have an account? <a href="#" onclick="showLogin(); return false;">Sign in</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="appContainer" style="display: none;">
        <header>
            <div class="container">
                <div class="header-content">
                    <a class="logo" onclick="navigateTo('dashboard')">
                        <i class="fas fa-tower-observation"></i>
                        <h1>WatchTower</h1>
                    </a>

                    <nav class="nav-links">
                        <span class="nav-link active" onclick="navigateTo('dashboard')" data-nav="dashboard">
                            <i class="fas fa-home"></i> Dashboard
                        </span>
                        <span class="nav-link" onclick="navigateTo('materials')" data-nav="materials">
                            <i class="fas fa-film"></i> Materials
                        </span>
                        <span class="nav-link" onclick="navigateTo('profile')" data-nav="profile">
                            <i class="fas fa-user"></i> Profile
                        </span>
                        <span class="nav-link" onclick="navigateTo('groups')" data-nav="groups">
                            <i class="fas fa-users"></i> Groups
                        </span>
                        <span class="nav-link" onclick="navigateTo('forum')" data-nav="forum">
                            <i class="fas fa-comments"></i> Forum
                        </span>
                        <span class="nav-link" onclick="navigateTo('settings')" data-nav="settings">
                            <i class="fas fa-cog"></i> Settings
                        </span>
                    </nav>

                    <div class="user-info">
                        <div class="user-avatar" onclick="navigateTo('profile')">
                            <span id="userInitials">U</span>
                            <div class="notification-badge" id="notificationCount">0</div>
                        </div>
                        <button class="btn-secondary btn-small" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="container">
                <!-- Dashboard Section -->
                <div class="app-section active" id="dashboardSection">
                    <div class="dashboard-grid">
                        <!-- Sidebar -->
                        <aside class="sidebar">
                            <div class="sidebar-section">
                                <h3><i class="fas fa-chart-bar"></i> Quick Stats</h3>
                                <div class="quick-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">Total Items</span>
                                        <span class="stat-value" id="totalItems">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Completed</span>
                                        <span class="stat-value" id="completedItems">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Watching</span>
                                        <span class="stat-value" id="watchingItems">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Planning</span>
                                        <span class="stat-value" id="planningItems">0</span>
                                    </div>
                                </div>
                            </div>

                            <div class="sidebar-section">
                                <h3><i class="fas fa-filter"></i> Quick Filters</h3>
                                <div class="filter-group">
                                    <button class="filter-btn active" onclick="filterMaterials('all')">
                                        <i class="fas fa-list"></i> All Materials
                                    </button>
                                    <button class="filter-btn" onclick="filterMaterials('movie')">
                                        <i class="fas fa-film"></i> Movies
                                    </button>
                                    <button class="filter-btn" onclick="filterMaterials('series')">
                                        <i class="fas fa-tv"></i> TV Series
                                    </button>
                                    <button class="filter-btn" onclick="filterMaterials('anime')">
                                        <i class="fas fa-dragon"></i> Anime
                                    </button>
                                    <button class="filter-btn" onclick="filterMaterials('book')">
                                        <i class="fas fa-book"></i> Books
                                    </button>
                                </div>
                            </div>

                            <div class="sidebar-section">
                                <h3><i class="fas fa-fire"></i> Trending</h3>
                                <div id="trendingList"></div>
                            </div>
                        </aside>

                        <!-- Main Content -->
                        <div>
                            <div class="section-header">
                                <h2>Your Watchlist</h2>
                                <div class="section-actions">
                                    <button class="btn-primary" onclick="openModal('addMaterialModal')">
                                        <i class="fas fa-plus"></i> Add Material
                                    </button>
                                    <button class="btn-secondary" onclick="openShareModal()">
                                        <i class="fas fa-share-alt"></i> Share
                                    </button>
                                    <button class="btn-outline" onclick="openImportModal()">
                                        <i class="fas fa-file-import"></i> Import
                                    </button>
                                </div>
                            </div>

                            <div class="search-bar">
                                <i class="fas fa-search"></i>
                                <input type="text" id="searchInput" placeholder="Search your materials..." oninput="searchMaterials()">
                                <button class="clear-search" id="clearSearch" onclick="clearSearch()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>

                            <div class="card">
                                <div class="materials-grid" id="materialsGrid">
                                    <!-- Materials will be loaded here -->
                                </div>
                                <div id="emptyState" class="empty-state">
                                    <i class="fas fa-inbox"></i>
                                    <h3>No materials yet</h3>
                                    <p>Start tracking your favorite movies, series, anime, and books!</p>
                                    <button class="btn-primary" onclick="openModal('addMaterialModal')">
                                        <i class="fas fa-plus"></i> Add Your First Material
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Materials Section -->
                <div class="app-section" id="materialsSection">
                    <div class="section-header">
                        <h2>All Materials</h2>
                        <div class="section-actions">
                            <button class="btn-primary" onclick="openModal('addMaterialModal')">
                                <i class="fas fa-plus"></i> Add Material
                            </button>
                        </div>
                    </div>

                    <div class="tabs">
                        <div class="tab active" onclick="switchMaterialTab('all')">
                            <i class="fas fa-list"></i> All
                        </div>
                        <div class="tab" onclick="switchMaterialTab('watching')">
                            <i class="fas fa-play"></i> Watching
                        </div>
                        <div class="tab" onclick="switchMaterialTab('completed')">
                            <i class="fas fa-check"></i> Completed
                        </div>
                        <div class="tab" onclick="switchMaterialTab('planning')">
                            <i class="fas fa-clock"></i> Planning
                        </div>
                        <div class="tab" onclick="switchMaterialTab('dropped')">
                            <i class="fas fa-times"></i> Dropped
                        </div>
                    </div>

                    <div class="card">
                        <div class="materials-grid" id="allMaterialsGrid">
                            <!-- Materials will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Profile Section -->
                <div class="app-section" id="profileSection">
                    <div class="card">
                        <div class="profile-header">
                            <div class="profile-info">
                                <div class="profile-avatar" id="profileAvatar">U</div>
                                <div class="profile-details">
                                    <h2 id="profileName">User Name</h2>
                                    <p id="profileEmail">user@email.com</p>
                                    <div class="profile-stats">
                                        <div class="profile-stat">
                                            <span class="value" id="profileMaterials">0</span>
                                            <span class="label">Materials</span>
                                        </div>
                                        <div class="profile-stat">
                                            <span class="value" id="profileFollowers">0</span>
                                            <span class="label">Followers</span>
                                        </div>
                                        <div class="profile-stat">
                                            <span class="value" id="profileFollowing">0</span>
                                            <span class="label">Following</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tabs" style="margin-bottom: 30px;">
                        <div class="tab active" onclick="switchProfileTab('activity')">
                            <i class="fas fa-history"></i> Activity
                        </div>
                        <div class="tab" onclick="switchProfileTab('materials')">
                            <i class="fas fa-film"></i> Materials
                        </div>
                        <div class="tab" onclick="switchProfileTab('followers')">
                            <i class="fas fa-users"></i> Followers
                        </div>
                        <div class="tab" onclick="switchProfileTab('edit')">
                            <i class="fas fa-edit"></i> Edit Profile
                        </div>
                    </div>
                    
                    <div id="profileContent">
                        <!-- Profile content will be loaded here -->
                    </div>
                </div>
                
                <!-- Groups Section -->
                <div class="app-section" id="groupsSection">
                    <div class="section-header">
                        <h2>Groups & Communities</h2>
                        <div class="section-actions">
                            <button class="btn-primary" onclick="openCreateGroupModal()">
                                <i class="fas fa-plus"></i> Create Group
                            </button>
                            <button class="btn-secondary" onclick="openJoinGroupModal()">
                                <i class="fas fa-user-plus"></i> Join Group
                            </button>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-bottom: 30px;">
                        <h3 style="margin-bottom: 15px;">Your Groups</h3>
                        <div class="groups-grid" id="groupsList">
                            <!-- Groups will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 style="margin-bottom: 15px;">Group Messages</h3>
                        <div id="groupMessages">
                            <!-- Messages will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Forum Section -->
                <div class="app-section" id="forumSection">
                    <div class="section-header">
                        <h2>Community Forum</h2>
                        <div class="section-actions">
                            <button class="btn-primary" onclick="openCreatePostModal()">
                                <i class="fas fa-plus"></i> New Post
                            </button>
                            <button class="btn-secondary" onclick="refreshForum()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-bottom: 30px;">
                        <div class="forum-post" id="newPostForm" style="display: none;">
                            <div class="form-group">
                                <input type="text" id="postTitle" placeholder="Post Title" style="font-size: 18px; font-weight: 600;">
                            </div>
                            <div class="form-group">
                                <textarea id="postContent" placeholder="What would you like to share?" rows="4"></textarea>
                            </div>
                            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                                <button class="btn-secondary" onclick="cancelPost()">Cancel</button>
                                <button class="btn-primary" onclick="submitPost()">Post</button>
                            </div>
                        </div>
                        
                        <div id="forumPosts">
                            <!-- Forum posts will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 style="margin-bottom: 15px;">Recommendations For You</h3>
                        <div id="recommendationsList">
                            <!-- Recommendations will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Settings Section -->
                <div class="app-section" id="settingsSection">
                    <div class="settings-grid">
                        <div class="settings-menu">
                            <div class="settings-item active" onclick="switchSettingsTab('general')">
                                <i class="fas fa-cog"></i> General Settings
                            </div>
                            <div class="settings-item" onclick="switchSettingsTab('account')">
                                <i class="fas fa-user-cog"></i> Account Settings
                            </div>
                            <div class="settings-item" onclick="switchSettingsTab('privacy')">
                                <i class="fas fa-shield-alt"></i> Privacy & Security
                            </div>
                            <div class="settings-item" onclick="switchSettingsTab('notifications')">
                                <i class="fas fa-bell"></i> Notifications
                            </div>
                            <div class="settings-item" onclick="switchSettingsTab('appearance')">
                                <i class="fas fa-palette"></i> Appearance
                            </div>
                            <div class="settings-item" onclick="switchSettingsTab('data')">
                                <i class="fas fa-database"></i> Data Management
                            </div>
                        </div>
                        
                        <div class="settings-content" id="settingsContent">
                            <!-- Settings content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="addMaterialModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Material</h3>
                <button class="close-modal" onclick="closeModal('addMaterialModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="materialForm" onsubmit="return false;">
                    <div class="form-group">
                        <label for="materialTitle">Title *</label>
                        <input type="text" id="materialTitle" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="materialType">Type *</label>
                            <select id="materialType" required>
                                <option value="">Select type</option>
                                <option value="movie">Movie</option>
                                <option value="series">TV Series</option>
                                <option value="anime">Anime</option>
                                <option value="manga">Manga</option>
                                <option value="book">Book</option>
                                <option value="documentary">Documentary</option>
                                <option value="game">Video Game</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="materialStatus">Status *</label>
                            <select id="materialStatus" required>
                                <option value="planning">Planning to Watch</option>
                                <option value="watching">Currently Watching</option>
                                <option value="completed">Completed</option>
                                <option value="dropped">Dropped</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="materialGenre">Genre</label>
                            <select id="materialGenre">
                                <option value="">Select genre</option>
                                <option value="action">Action</option>
                                <option value="comedy">Comedy</option>
                                <option value="drama">Drama</option>
                                <option value="sci-fi">Sci-Fi</option>
                                <option value="fantasy">Fantasy</option>
                                <option value="horror">Horror</option>
                                <option value="romance">Romance</option>
                                <option value="thriller">Thriller</option>
                                <option value="mystery">Mystery</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="materialRating">Your Rating (1-10)</label>
                            <input type="number" id="materialRating" min="1" max="10" step="0.5">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="materialYear">Release Year</label>
                            <input type="number" id="materialYear" min="1900" max="2030">
                        </div>
                        <div class="form-group">
                            <label for="materialProgress">Progress</label>
                            <input type="number" id="materialProgress" placeholder="Episode/Chapter">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="materialNotes">Notes</label>
                        <textarea id="materialNotes" rows="3" placeholder="Add your thoughts..."></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" class="btn-secondary" onclick="closeModal('addMaterialModal')">Cancel</button>
                        <button type="button" class="btn-primary" onclick="saveMaterial()">
                            <i class="fas fa-save"></i> Save Material
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Share Your Watchlist</h3>
                <button class="close-modal" onclick="closeModal('shareModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Share Link</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="shareLinkInput" readonly>
                        <button class="btn-primary" onclick="copyShareLink()">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Privacy Settings</label>
                    <select id="sharePrivacy" onchange="updateSharePrivacy()">
                        <option value="public">Public - Anyone can view</option>
                        <option value="friends">Friends Only</option>
                        <option value="private">Private - Only me</option>
                    </select>
                </div>
                
                <div class="share-buttons">
                    <button class="share-btn facebook" onclick="shareTo('facebook')">
                        <i class="fab fa-facebook-f"></i> Facebook
                    </button>
                    <button class="share-btn twitter" onclick="shareTo('twitter')">
                        <i class="fab fa-twitter"></i> Twitter
                    </button>
                    <button class="share-btn whatsapp" onclick="shareTo('whatsapp')">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage"></span>
    </div>

    <!-- Scripts -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, sendPasswordResetEmail } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getDatabase, ref, set, get, update, remove, push, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBXJZ8v3K8F0Q9YhN7x2WqM4kL1pT6cD8E",
            authDomain: "watchtower-demo.firebaseapp.com",
            databaseURL: "https://watchtower-demo-default-rtdb.firebaseio.com",
            projectId: "watchtower-demo",
            storageBucket: "watchtower-demo.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef123456"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        // Make available globally
        window.auth = auth;
        window.database = database;
        window.firebaseRef = ref;
        window.firebaseSet = set;
        window.firebaseGet = get;
        window.firebaseUpdate = update;
        window.firebaseRemove = remove;
        window.firebasePush = push;
        window.firebaseOnValue = onValue;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.signOut = signOut;
        window.sendPasswordResetEmail = sendPasswordResetEmail;

        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                window.currentUser = user;
                showApp();
                loadUserData();
            } else {
                window.currentUser = null;
                showAuth();
            }
        });
    </script>

    <script>
        // Global variables
        let currentUser = null;
        let materials = [];
        let notifications = [];
        let currentFilter = 'all';
        let currentMaterialTab = 'all';

        // DOM elements
        const notificationElement = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');
        const authContainer = document.getElementById('authContainer');
        const appContainer = document.getElementById('appContainer');

        // Show/Hide Functions
        function showAuth() {
            authContainer.style.display = 'flex';
            appContainer.style.display = 'none';
        }

        function showApp() {
            authContainer.style.display = 'none';
            appContainer.style.display = 'block';
            initializeApp();
        }

        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('signupForm').style.display = 'none';
        }

        function showSignup() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
        }

        // Authentication Functions
        async function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showNotification('Please fill in all fields', 'error');
                return;
            }

            try {
                await signInWithEmailAndPassword(auth, email, password);
                showNotification('Welcome back!', 'success');
            } catch (error) {
                console.error('Login error:', error);
                showNotification(error.message, 'error');
            }
        }

        async function signup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            if (!name || !email || !password) {
                showNotification('Please fill in all fields', 'error');
                return;
            }

            if (password.length < 6) {
                showNotification('Password must be at least 6 characters', 'error');
                return;
            }

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                
                // Save user data
                await firebaseSet(firebaseRef(database, 'users/' + user.uid), {
                    name: name,
                    email: email,
                    createdAt: new Date().toISOString()
                });
                
                showNotification('Account created successfully!', 'success');
            } catch (error) {
                console.error('Signup error:', error);
                showNotification(error.message, 'error');
            }
        }

        async function logout() {
            try {
                await signOut(auth);
                showNotification('Logged out successfully', 'success');
                materials = [];
                showAuth();
            } catch (error) {
                console.error('Logout error:', error);
                showNotification('Error logging out', 'error');
            }
        }

        async function showForgotPassword() {
            const email = prompt('Enter your email address to reset password:');
            if (email) {
                try {
                    await sendPasswordResetEmail(auth, email);
                    showNotification('Password reset email sent!', 'success');
                } catch (error) {
                    showNotification('Error: ' + error.message, 'error');
                }
            }
        }

        // Initialize App
        function initializeApp() {
            loadUserData();
            loadMaterials();
            loadNotifications();
            initModals();
            initializeSampleData();
            updateStats();
        }

        // Load User Data
        async function loadUserData() {
            if (!currentUser) return;

            try {
                const snapshot = await firebaseGet(firebaseRef(database, 'users/' + currentUser.uid));
                if (snapshot.exists()) {
                    const userData = snapshot.val();
                    const initials = userData.name ? userData.name.charAt(0).toUpperCase() : 'U';
                    document.getElementById('userInitials').textContent = initials;
                    document.getElementById('profileAvatar').textContent = initials;
                    document.getElementById('profileName').textContent = userData.name || 'User';
                    document.getElementById('profileEmail').textContent = userData.email || currentUser.email;
                }
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        // Load Materials
        async function loadMaterials() {
            if (!currentUser) return;

            try {
                const snapshot = await firebaseGet(firebaseRef(database, 'materials/' + currentUser.uid));
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    materials = Object.keys(data).map(key => ({
                        id: key,
                        ...data[key]
                    }));
                } else {
                    materials = [];
                }
                
                renderMaterials();
                updateStats();
            } catch (error) {
                console.error('Error loading materials:', error);
                materials = [];
                renderMaterials();
            }
        }

        // Render Materials
        function renderMaterials() {
            const grid = document.getElementById('materialsGrid');
            const allGrid = document.getElementById('allMaterialsGrid');
            const emptyState = document.getElementById('emptyState');
            
            let filteredMaterials = materials;
            
            // Apply filter
            if (currentFilter !== 'all') {
                filteredMaterials = materials.filter(m => m.type === currentFilter);
            }
            
            // Apply material tab filter
            if (currentMaterialTab !== 'all') {
                filteredMaterials = filteredMaterials.filter(m => m.status === currentMaterialTab);
            }
            
            const html = filteredMaterials.map(material => createMaterialCard(material)).join('');
            
            if (grid) {
                grid.innerHTML = html;
                if (emptyState) {
                    emptyState.style.display = materials.length === 0 ? 'block' : 'none';
                }
            }
            
            if (allGrid) {
                allGrid.innerHTML = html || '<div class="empty-state"><i class="fas fa-inbox"></i><h3>No materials found</h3></div>';
            }
        }

        // Create Material Card
        function createMaterialCard(material) {
            const typeIcons = {
                movie: 'fa-film',
                series: 'fa-tv',
                anime: 'fa-dragon',
                manga: 'fa-book-open',
                book: 'fa-book',
                documentary: 'fa-video',
                game: 'fa-gamepad',
                other: 'fa-star'
            };
            
            const icon = typeIcons[material.type] || 'fa-star';
            const statusClass = `status-${material.status}`;
            const statusText = material.status.charAt(0).toUpperCase() + material.status.slice(1);
            
            return `
                <div class="material-card">
                    <div class="material-poster">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div class="material-info">
                        <div class="material-title">${material.title}</div>
                        <div class="material-meta">
                            <span>${material.type.charAt(0).toUpperCase() + material.type.slice(1)}</span>
                            ${material.year ? `<span>${material.year}</span>` : ''}
                        </div>
                        ${material.rating ? `
                            <div class="material-rating">
                                <i class="fas fa-star"></i>
                                <span>${material.rating}/10</span>
                            </div>
                        ` : ''}
                        <span class="material-status ${statusClass}">${statusText}</span>
                        ${material.progress ? `
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${(material.progress / material.total * 100) || 0}%"></div>
                            </div>
                        ` : ''}
                        <div class="material-actions">
                            <button class="action-btn" onclick="editMaterial('${material.id}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="action-btn" onclick="deleteMaterial('${material.id}')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Save Material
        async function saveMaterial() {
            if (!currentUser) {
                showNotification('Please sign in first', 'error');
                return;
            }

            const title = document.getElementById('materialTitle').value;
            const type = document.getElementById('materialType').value;
            const status = document.getElementById('materialStatus').value;
            const genre = document.getElementById('materialGenre').value;
            const rating = document.getElementById('materialRating').value;
            const year = document.getElementById('materialYear').value;
            const progress = document.getElementById('materialProgress').value;
            const notes = document.getElementById('materialNotes').value;

            if (!title || !type || !status) {
                showNotification('Please fill in required fields', 'error');
                return;
            }

            const material = {
                title,
                type,
                status,
                genre,
                rating: rating ? parseFloat(rating) : null,
                year: year ? parseInt(year) : null,
                progress: progress ? parseInt(progress) : null,
                notes,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            try {
                const newRef = firebasePush(firebaseRef(database, 'materials/' + currentUser.uid));
                await firebaseSet(newRef, material);
                
                showNotification('Material added successfully!', 'success');
                closeModal('addMaterialModal');
                document.getElementById('materialForm').reset();
                await loadMaterials();
            } catch (error) {
                console.error('Error saving material:', error);
                showNotification('Error saving material', 'error');
            }
        }

        // Edit Material
        function editMaterial(id) {
            const material = materials.find(m => m.id === id);
            if (!material) return;

            document.getElementById('materialTitle').value = material.title || '';
            document.getElementById('materialType').value = material.type || '';
            document.getElementById('materialStatus').value = material.status || '';
            document.getElementById('materialGenre').value = material.genre || '';
            document.getElementById('materialRating').value = material.rating || '';
            document.getElementById('materialYear').value = material.year || '';
            document.getElementById('materialProgress').value = material.progress || '';
            document.getElementById('materialNotes').value = material.notes || '';

            openModal('addMaterialModal');
        }

        // Delete Material
        async function deleteMaterial(id) {
            if (!confirm('Are you sure you want to delete this material?')) return;

            try {
                await firebaseRemove(firebaseRef(database, 'materials/' + currentUser.uid + '/' + id));
                showNotification('Material deleted successfully', 'success');
                await loadMaterials();
            } catch (error) {
                console.error('Error deleting material:', error);
                showNotification('Error deleting material', 'error');
            }
        }

        // Filter Materials
        function filterMaterials(type) {
            currentFilter = type;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderMaterials();
        }

        // Search Materials
        function searchMaterials() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const grid = document.getElementById('materialsGrid');
            const clearBtn = document.getElementById('clearSearch');
            
            clearBtn.style.display = query ? 'block' : 'none';
            
            const filtered = materials.filter(m => 
                m.title.toLowerCase().includes(query) ||
                m.type.toLowerCase().includes(query) ||
                (m.genre && m.genre.toLowerCase().includes(query))
            );
            
            const html = filtered.map(material => createMaterialCard(material)).join('');
            grid.innerHTML = html || '<div class="empty-state"><i class="fas fa-search"></i><h3>No results found</h3></div>';
        }

        // Clear Search
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('clearSearch').style.display = 'none';
            renderMaterials();
        }

        // Update Stats
        function updateStats() {
            const total = materials.length;
            const completed = materials.filter(m => m.status === 'completed').length;
            const watching = materials.filter(m => m.status === 'watching').length;
            const planning = materials.filter(m => m.status === 'planning').length;
            
            document.getElementById('totalItems').textContent = total;
            document.getElementById('completedItems').textContent = completed;
            document.getElementById('watchingItems').textContent = watching;
            document.getElementById('planningItems').textContent = planning;
            document.getElementById('profileMaterials').textContent = total;
        }

        // Navigation
        function navigateTo(section) {
            // Hide all sections
            document.querySelectorAll('.app-section').forEach(s => s.classList.remove('active'));
            
            // Show selected section
            document.getElementById(section + 'Section').classList.add('active');
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-nav') === section) {
                    link.classList.add('active');
                }
            });
            
            // Load section-specific content
            switch(section) {
                case 'profile':
                    switchProfileTab('activity');
                    break;
                case 'settings':
                    switchSettingsTab('general');
                    break;
                case 'groups':
                    loadGroups();
                    break;
                case 'forum':
                    loadForumPosts();
                    break;
            }
        }

        // Switch Material Tab
        function switchMaterialTab(tab) {
            currentMaterialTab = tab;
            
            // Update tab UI
            document.querySelectorAll('#materialsSection .tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            renderMaterials();
        }

        // Switch Profile Tab
        function switchProfileTab(tab) {
            const content = document.getElementById('profileContent');
            
            // Update tab UI
            document.querySelectorAll('#profileSection .tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            switch(tab) {
                case 'activity':
                    content.innerHTML = `
                        <div class="card">
                            <h3>Recent Activity</h3>
                            <div class="empty-state">
                                <i class="fas fa-clock"></i>
                                <h3>No recent activity</h3>
                                <p>Your activity will appear here</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'materials':
                    content.innerHTML = `
                        <div class="card">
                            <h3>Your Materials</h3>
                            <div class="materials-grid">
                                ${materials.map(m => createMaterialCard(m)).join('') || 
                                '<div class="empty-state"><i class="fas fa-inbox"></i><h3>No materials yet</h3></div>'}
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'followers':
                    content.innerHTML = `
                        <div class="card">
                            <h3>Followers</h3>
                            <div class="empty-state">
                                <i class="fas fa-users"></i>
                                <h3>No followers yet</h3>
                                <p>Share your watchlist to gain followers!</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'edit':
                    const userData = currentUser ? {
                        name: document.getElementById('profileName').textContent,
                        email: document.getElementById('profileEmail').textContent
                    } : {};
                    
                    content.innerHTML = `
                        <div class="card">
                            <h3>Edit Profile</h3>
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" value="${userData.name || ''}" id="editName">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" value="${userData.email || ''}" disabled>
                            </div>
                            <div class="form-group">
                                <label>Bio</label>
                                <textarea rows="4" placeholder="Tell us about yourself..."></textarea>
                            </div>
                            <button class="btn-primary" onclick="saveProfile()">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    `;
                    break;
            }
        }

        // Save Profile
        async function saveProfile() {
            const name = document.getElementById('editName').value;
            
            if (!currentUser || !name) {
                showNotification('Please fill in all fields', 'error');
                return;
            }

            try {
                await firebaseUpdate(firebaseRef(database, 'users/' + currentUser.uid), {
                    name: name,
                    updatedAt: new Date().toISOString()
                });
                
                showNotification('Profile updated successfully!', 'success');
                loadUserData();
            } catch (error) {
                console.error('Error updating profile:', error);
                showNotification('Error updating profile', 'error');
            }
        }

        // Switch Settings Tab
        function switchSettingsTab(tab) {
            const content = document.getElementById('settingsContent');
            
            // Update menu UI
            document.querySelectorAll('.settings-item').forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            switch(tab) {
                case 'general':
                    content.innerHTML = `
                        <h2 style="margin-bottom: 20px;">General Settings</h2>
                        <div class="form-group">
                            <label>Language</label>
                            <select>
                                <option>English</option>
                                <option>Spanish</option>
                                <option>French</option>
                                <option>German</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Time Zone</label>
                            <select>
                                <option>UTC-8 (PST)</option>
                                <option>UTC-5 (EST)</option>
                                <option>UTC+0 (GMT)</option>
                                <option>UTC+1 (CET)</option>
                            </select>
                        </div>
                        <button class="btn-primary">Save Changes</button>
                    `;
                    break;
                    
                case 'account':
                    content.innerHTML = `
                        <h2 style="margin-bottom: 20px;">Account Settings</h2>
                        <div class="form-group">
                            <label>Email Notifications</label>
                            <div style="display: flex; gap: 20px; margin-top: 10px;">
                                <label style="font-weight: normal;">
                                    <input type="checkbox" checked> New followers
                                </label>
                                <label style="font-weight: normal;">
                                    <input type="checkbox" checked> Comments on posts
                                </label>
                                <label style="font-weight: normal;">
                                    <input type="checkbox"> Weekly digest
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Account Visibility</label>
                            <select>
                                <option>Public</option>
                                <option>Private</option>
                                <option>Friends Only</option>
                            </select>
                        </div>
                        <button class="btn-primary">Save Changes</button>
                    `;
                    break;
                    
                case 'privacy':
                    content.innerHTML = `
                        <h2 style="margin-bottom: 20px;">Privacy & Security</h2>
                        <div class="form-group">
                            <label>Two-Factor Authentication</label>
                            <button class="btn-outline" style="margin-left: 15px;">Enable 2FA</button>
                        </div>
                        <div class="form-group">
                            <label>Login Sessions</label>
                            <div style="background: #f9f9f9; padding: 15px; border-radius: var(--radius-sm); margin-top: 10px;">
                                <p style="margin-bottom: 10px;">Current session: This device</p>
                                <button class="btn-danger btn-small">Log out from all other devices</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Data Privacy</label>
                            <button class="btn-outline" style="margin-left: 15px;">Download my data</button>
                            <button class="btn-danger" style="margin-left: 15px;">Delete account</button>
                        </div>
                    `;
                    break;
                    
                case 'notifications':
                    content.innerHTML = `
                        <h2 style="margin-bottom: 20px;">Notification Preferences</h2>
                        <div class="form-group">
                            <label style="font-weight: normal;">
                                <input type="checkbox" checked> Push notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="font-weight: normal;">
                                <input type="checkbox" checked> Email notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="font-weight: normal;">
                                <input type="checkbox"> Weekly summary
                            </label>
                        </div>
                        <button class="btn-primary">Save Changes</button>
                    `;
                    break;
                    
                case 'appearance':
                    content.innerHTML = `
                        <h2 style="margin-bottom: 20px;">Appearance</h2>
                        <div class="form-group">
                            <label>Theme</label>
                            <select>
                                <option>Light</option>
                                <option>Dark</option>
                                <option>Auto</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Accent Color</label>
                            <input type="color" value="#1a73e8">
                        </div>
                        <button class="btn-primary">Save Changes</button>
                    `;
                    break;
                    
                case 'data':
                    content.innerHTML = `
                        <h2 style="margin-bottom: 20px;">Data Management</h2>
                        <div class="form-group">
                            <label>Export Data</label>
                            <p style="color: #666; margin-bottom: 10px;">Download all your watchlist data</p>
                            <button class="btn-primary">Export as JSON</button>
                            <button class="btn-secondary" style="margin-left: 10px;">Export as CSV</button>
                        </div>
                        <div class="form-group">
                            <label>Import Data</label>
                            <p style="color: #666; margin-bottom: 10px;">Import your data from other services</p>
                            <button class="btn-outline">Choose File</button>
                        </div>
                    `;
                    break;
            }
        }

        // Load Groups
        function loadGroups() {
            const groupsList = document.getElementById('groupsList');
            const groupMessages = document.getElementById('groupMessages');
            
            groupsList.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-users"></i>
                    <h3>No groups yet</h3>
                    <p>Create or join a group to start collaborating!</p>
                </div>
            `;
            
            groupMessages.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-comments"></i>
                    <h3>No messages</h3>
                    <p>Join a group to start chatting!</p>
                </div>
            `;
        }

        // Load Forum Posts
        function loadForumPosts() {
            const forumPosts = document.getElementById('forumPosts');
            const recommendationsList = document.getElementById('recommendationsList');
            
            forumPosts.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-comments"></i>
                    <h3>No posts yet</h3>
                    <p>Be the first to start a discussion!</p>
                </div>
            `;
            
            recommendationsList.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-star"></i>
                    <h3>No recommendations</h3>
                    <p>Add more materials to get personalized recommendations!</p>
                </div>
            `;
        }

        // Forum Functions
        function openCreatePostModal() {
            document.getElementById('newPostForm').style.display = 'block';
        }

        function cancelPost() {
            document.getElementById('newPostForm').style.display = 'none';
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
        }

        function submitPost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            
            if (!title || !content) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            showNotification('Post created successfully!', 'success');
            cancelPost();
        }

        // Share Functions
        function openShareModal() {
            if (!currentUser) {
                showNotification('Please sign in to share your watchlist', 'error');
                return;
            }
            
            // Generate share link
            const shareLink = `${window.location.origin}?share=${currentUser.uid}`;
            document.getElementById('shareLinkInput').value = shareLink;
            
            openModal('shareModal');
        }

        function copyShareLink() {
            const input = document.getElementById('shareLinkInput');
            input.select();
            input.setSelectionRange(0, 99999);
            
            navigator.clipboard.writeText(input.value)
                .then(() => {
                    showNotification('Link copied to clipboard!', 'success');
                })
                .catch(err => {
                    console.error('Failed to copy:', err);
                    showNotification('Failed to copy link', 'error');
                });
        }

        function updateSharePrivacy() {
            const privacy = document.getElementById('sharePrivacy').value;
            showNotification(`Privacy set to: ${privacy}`, 'success');
        }

        function shareTo(platform) {
            const message = `Check out my watchlist on WatchTower!`;
            const url = document.getElementById('shareLinkInput').value;
            
            let shareUrl = '';
            switch(platform) {
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}&url=${encodeURIComponent(url)}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodeURIComponent(message + ' ' + url)}`;
                    break;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }

        // Notification Functions
        function loadNotifications() {
            notifications = [
                { id: 1, type: 'like', message: 'Alex liked your post', read: false, time: '10 min ago' },
                { id: 2, type: 'follow', message: 'Maria started following you', read: false, time: '1 hour ago' },
                { id: 3, type: 'comment', message: 'John commented on your recommendation', read: true, time: '2 days ago' }
            ];
            
            const unreadCount = notifications.filter(n => !n.read).length;
            if (unreadCount > 0) {
                document.getElementById('notificationCount').textContent = unreadCount;
                document.getElementById('notificationCount').style.display = 'flex';
            }
        }

        // Modal Functions
        function initModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Utility Functions
        function showNotification(message, type = 'success') {
            notificationMessage.textContent = message;
            notificationElement.className = `notification show ${type}`;
            
            setTimeout(() => {
                notificationElement.classList.remove('show');
            }, 3000);
        }

        function initializeSampleData() {
            const trendingList = document.getElementById('trendingList');
            if (trendingList) {
                trendingList.innerHTML = `
                    <div style="padding: 10px; background: #f9f9f9; border-radius: var(--radius-sm); margin-bottom: 8px;">
                        <div style="font-weight: 600; font-size: 14px;">Dune: Part Two</div>
                        <div style="font-size: 12px; color: #666;">Movie • 2024</div>
                    </div>
                    <div style="padding: 10px; background: #f9f9f9; border-radius: var(--radius-sm); margin-bottom: 8px;">
                        <div style="font-weight: 600; font-size: 14px;">Shōgun</div>
                        <div style="font-size: 12px; color: #666;">TV Series • 2024</div>
                    </div>
                    <div style="padding: 10px; background: #f9f9f9; border-radius: var(--radius-sm); margin-bottom: 8px;">
                        <div style="font-weight: 600; font-size: 14px;">Fallout</div>
                        <div style="font-size: 12px; color: #666;">TV Series • 2024</div>
                    </div>
                    <div style="padding: 10px; background: #f9f9f9; border-radius: var(--radius-sm); margin-bottom: 8px;">
                        <div style="font-weight: 600; font-size: 14px;">Attack on Titan</div>
                        <div style="font-size: 12px; color: #666;">Anime • 2013-2023</div>
                    </div>
                `;
            }
        }

        // Stub functions for future features
        function openCreateGroupModal() {
            showNotification('Group creation feature coming soon!', 'info');
        }

        function openJoinGroupModal() {
            showNotification('Join group feature coming soon!', 'info');
        }

        function openImportModal() {
            showNotification('Import feature coming soon!', 'info');
        }

        function refreshForum() {
            showNotification('Forum refreshed!', 'success');
            loadForumPosts();
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + K for search
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            
            // Escape to close modals
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
            }
        });
    </script>
</body>
</html>
